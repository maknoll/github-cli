#!/usr/bin/env ruby

$:.unshift File.expand_path('../lib', File.dirname(__FILE__))

require 'github-cli'

client = Github::Client.open(File.join Dir.home, '.github')

case ARGV.shift
when 'create'
	name = ARGV[0]
	name ||=  File.basename Dir.pwd
	repository = Github::Repository.new(:name=>name)

	begin
		response = client.create repository
	rescue => error
		puts error.message
	end

	response and `git remote add github #{response.ssh_url}`
else
	usage
end
